<launch>
    <!--include file="$(find roman_model)/robots/upload_rcta_roman.launch"/-->
    <include file="$(find roman_model)/robots/upload_roman1.launch"/>

    <node name="robot_simulator" pkg="roman_simulation" type="robot_simulator"/>
    <rosparam command="load" file="$(find roman_simulation)/config/roman_control_sim.yaml"/>

    <!-- This node is the culprit that won't die on C-c (at least in indigo)
    since it attempts to unload the controllers after the controller manager
    has already died. The shutdown-timeout argument makes this less terrible,
    but it is deprecated in xenial/kinetic.
    -->
    <node name="controller_spawner" pkg="controller_manager" type="spawner"
            args="--shutdown-timeout 0.5 joint_state_controller rcta_joint_trajectory_controller
                  rcta_left_robotiq_controller rcta_right_robotiq_controller rcta_velocity_controller"/>

    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

    <node name="fake_localization" pkg="tf" type="static_transform_publisher"
            args="0 0 0 0 0 0 map odom 16"/>

    <node name="trajectory_dispatcher" pkg="roman_simulation" type="trajectory_dispatcher">
        <rosparam param="clients">
            - name: rcta_joint_trajectory_controller/follow_joint_trajectory
              joints:
                - torso_joint1
                - limb_right_joint1
                - limb_right_joint2
                - limb_right_joint3
                - limb_right_joint4
                - limb_right_joint5
                - limb_right_joint6
                - limb_right_joint7
#                - limb_left_joint1
#                - limb_left_joint2
#                - limb_left_joint3
#                - limb_left_joint4
#                - limb_left_joint5
#                - limb_left_joint6
#                - limb_left_joint7
        </rosparam>
    </node>

    <node name="gripper_command_action_server" pkg="roman_simulation" type="gripper_command_action_server"/>
</launch>
